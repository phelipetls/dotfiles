---
- name: Install psutil
  pip:
    name:
      - psutil
    state: present

- name: Enable tap to click on touchpad
  community.general.dconf:
    key: "/org/gnome/desktop/peripherals/touchpad/tap-to-click"
    value: "true"

- name: Show battery percentage
  community.general.dconf:
    key: "/org/gnome/desktop/interface/show-battery-percentage"
    value: "true"

- name: Show apps in current workspace only on Alt+Tab
  community.general.dconf:
    key: "/org/gnome/shell/app-switcher/current-workspace-only"
    value: "true"

- name: Load gnome terminal profile generated with pywal
  command:
    cmd: "dconf load /org/gnome/terminal/legacy/profiles:/"
    stdin: "{{ lookup('file', '{{ ansible_env.HOME }}/.cache/wal/gnome-terminal-profile') }}"
  changed_when: false
